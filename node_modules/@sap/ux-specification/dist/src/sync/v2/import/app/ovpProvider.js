"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.V2OvpProvider = void 0;
const ux_specification_types_1 = require("@sap/ux-specification-types");
const appProvider_1 = require("../../../common/appProvider");
const common_1 = require("../common");
const overviewPage_1 = require("../pages/overviewPage");
const application_1 = require("../../application");
const common_2 = require("../../../common");
class V2OvpProvider extends appProvider_1.AppProvider {
    constructor(manifest, schemas, logger) {
        const pages = {};
        const sapOvp = manifest[ux_specification_types_1.ManifestSection.ovp];
        const appSettings = new application_1.AppSettings();
        const schemaFile = common_2.getSchemaFilePath(ux_specification_types_1.SchemaType.Application);
        common_1.transferSettingsOfObject(appSettings, manifest, schemas[schemaFile.filename]['definitions']['AppSettings'], undefined);
        const jsonSchema = Object.keys(schemas).find((element) => element.includes(ux_specification_types_1.PageType.OverviewPage));
        const parameters = {
            manifest,
            jsonSchema: schemas[jsonSchema]
        };
        const page = {
            pageType: ux_specification_types_1.PageType.OverviewPage,
            config: overviewPage_1.createOverviewPageConfig(parameters),
            entitySet: sapOvp.globalFilterEntitySet
        };
        const id = common_2.generatePageId(page.pageType, page.entitySet);
        pages[id] = page;
        super(manifest, schemas, id, pages, ux_specification_types_1.FioriElementsVersion.v2, appSettings, logger);
    }
}
exports.V2OvpProvider = V2OvpProvider;
//# sourceMappingURL=ovpProvider.js.map